!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.socketPouch=e()}}(function(){var e;return function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return o(r?r:t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";t.exports=e("../lib/client")},{"../lib/client":8}],2:[function(e,t,r){"use strict";t.exports=function(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;n>o;o++)t+=String.fromCharCode(r[o]);return t}},{}],3:[function(e,t,r){"use strict";var n=e("../shared/buffer");"function"==typeof atob?r.atob=function(e){return atob(e)}:r.atob=function(e){var t=new n(e,"base64");if(t.toString("base64")!==e)throw"Cannot base64 encode full string";return t.toString("binary")},"function"==typeof btoa?r.btoa=function(e){return btoa(e)}:r.btoa=function(e){return new n(e,"binary").toString("base64")}},{"../shared/buffer":11}],4:[function(e,t,r){"use strict";var n=e("./binaryStringToBlobOrBuffer");t.exports=function(e,t){return n(atob(e),t)}},{"./binaryStringToBlobOrBuffer":6}],5:[function(e,t,r){"use strict";t.exports=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;t>o;o++)n[o]=e.charCodeAt(o);return r}},{}],6:[function(e,t,r){"use strict";var n=e("./blob"),o=e("./binaryStringToArrayBuffer");t.exports=function(e,t){return n([o(e)],{type:t})}},{"./binaryStringToArrayBuffer":5,"./blob":7}],7:[function(e,t,r){"use strict";function n(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,o=new n,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}t.exports=n},{}],8:[function(e,t,r){(function(r){"use strict";function n(e,t){function r(){e._socket.closed=!0,e._socket.once("close",function(r){u("socket closed",e._socketId,r),e._socket.removeAllListeners(),t()}),e._socket.close()}return u("closing socket",e._socketId,e._name),e._socket.closed?t():void r()}function o(e,t){function o(){var e=_[C];S._socket=e._socket,S._callbacks=e._callbacks,S._changesListeners=e._changesListeners,S._blobs=e._blobs,S._binaryMessages=e._binaryMessages,S._name=e._name,e._socketId?(S._socketId=e._socketId,r.nextTick(function(){t(null,S)})):S._socket.once("open",function(){S._socketId=S._socket.id,r.nextTick(function(){t(null,S)})})}function s(){function r(e){try{S.emit("error",e)}catch(t){console.error("The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),console.error(e)}}function n(e){var t=i.parseMessage(e,3),n=t[0],s=t[1],a=JSON.parse(t[2]);if("4"===s)return void r(a);var c=S._callbacks[n];return c?(u("receive message",S._socketId,n,s,a),void("0"===s?(delete S._callbacks[n],c(a)):"1"===s?(delete S._callbacks[n],c(null,a)):"2"===s?(S._changesListeners[n].asBinary&&m(a),S._changesListeners[n].listener(a)):(delete S._callbacks[n],o(a,c)))):void u("duplicate message (ignoring)",n,s,a)}function o(e,t){u("receiveBinaryMessage",e.uuid),S._binaryMessages[e.uuid]={contentType:e.type,cb:t},c(a)}function s(e){if(p)l.blobToBinaryString(e.slice(0,36)).then(function(t){S._blobs[t]=e.slice(36),u("receiveBlob",t),c(t)})["catch"](console.log.bind(console));else{var t=e.slice(0,36).toString("utf8");u("receiveBlob",t),S._blobs[t]=e.slice(36),c(t)}}function c(e){if(e in S._blobs&&e in S._binaryMessages){u("receive full binary message",e);var t=S._blobs[e],r=S._binaryMessages[e];delete S._blobs[e],delete S._binaryMessages[e];var n;p?n=l.createBlob([t],{type:r.contentType}):(n=t,t.type=r.contentType),r.cb(null,n)}}var h=S._socket=new f(e.url,e.socketOptions||{});h.binaryType="blob",S._callbacks={},S._changesListeners={},S._blobs={},S._binaryMessages={},S._name=S._socketName,_[C]=S,h.once("open",function(){S._socketId=h.id,u("socket opened",S._socketId,S._name),A("createDatabase",[{name:S._name,auto_compaction:!!e.auto_compaction}],function(e){return e?t(e):void t(null,S)})}),S._socket.once("error",function(e){t(e)}),S._socket.on("message",function(e){return"string"!=typeof e?s(e):void n(e)})}function A(e,t,r){var n=a();u("send message",S._socketId,n,e,t),S._callbacks[n]=r;var o=y(t);S._socket.send(e+":"+n+":"+o,function(){u("message sent",S._socketId,n)})}function x(e,t,r,n,o){var i=a();S._callbacks[i]=o;var s={args:t,blobIndex:r,messageId:i,messageType:e};u("send binary message",S._socketId,i,s);var c,f=JSON.stringify(s),d=g(f.length,16);c=p?l.createBlob([d,f,n]):h.concat([new h(d,"utf8"),new h(f,"utf8"),new h(n,"binary")]),S._socket.send(c,function(){u("binary message sent",S._socketId,i)})}var S=this;if("string"==typeof e){var E=i.lastIndexOf(e,"/");e={url:e.substring(0,E),name:e.substring(E+1)}}else e=i.clone(e);if(u("constructor called",e),!e.url||!e.name){var T="Error: you must provide a web socket url and database name.";return console.error(T),t(new Error(T))}S._socketName=e.originalName;var C="$"+S._socketName;_[C]?o():s(),S.type=function(){return"socket"},S._id=b("id",function(e){A("id",[],e)}),S.compact=b("compact",function(e,t){"function"==typeof e&&(t=e,e={}),A("compact",[e],t)}),S._info=function(e){A("info",[],e)},S.get=b("get",function(e,t,r){"function"==typeof t&&(r=t,t={}),A("get",[e,t],function(e,n){return e?r(e):(t.attachments&&t.binary&&(Array.isArray(n)?n.forEach(m):m({doc:n})),void r(null,n))})}),S.remove=b("remove",function(e,t,r,n){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(o=e,"function"==typeof t?(n=t,r={}):(n=r,r=t));var i=o._rev||r.rev;A("remove",[o._id,i],n)}),S.getAttachment=b("getAttachment",function(e,t,r,n){"function"==typeof r&&(n=r,r={}),A("getAttachment",[e,t,r],n)}),S.removeAttachment=b("removeAttachment",function(e,t,r,n){A("removeAttachment",[e,t,r],n)}),S.putAttachment=b("putAttachment",function(e,t,r,n,o,s){if("function"==typeof o&&(s=o,o=n,n=r,r=null),"undefined"==typeof o&&(o=n,n=r,r=null),"string"==typeof n){var a;try{a=i.atob(n)}catch(u){return s(c.error(c.BAD_ARG,"Attachments need to be base64 encoded"))}n=p?i.createBlob([i.binaryStringToArrayBuffer(a)],{type:o}):a?new h(a,"binary"):""}var f=[e,t,r,null,o];x("putAttachment",f,3,n,s)}),S.put=b("put",i.getArguments(function(e){var t,r,n,o=e.shift(),s="_id"in o,a=e.pop();return"object"!=typeof o||Array.isArray(o)?a(c.error(c.NOT_AN_OBJECT)):(o=i.clone(o),void d(o).then(function(){for(;;)if(t=e.shift(),r=typeof t,"string"!==r||s?"string"!==r||!s||"_rev"in o?"object"===r&&(n=i.clone(t)):o._rev=t:(o._id=t,s=!0),!e.length)break;n=n||{},A("put",[o,n],a)})["catch"](a))})),S.post=b("post",function(e,t,r){"function"==typeof t&&(r=t,t={}),t=i.clone(t),A("post",[e,t],r)}),S._bulkDocs=function(e,t,r){var n=e.docs||e;B.all(n.map(function(e){var t=e._attachments;if(t)return B.all(Object.keys(t).map(function(t){var r=e._attachments[t];if(w(r.data))return new B(function(e){v(r.data,e)}).then(function(e){r.data=k.btoa(e)})}))})).then(function(){A("bulkDocs",[e,t],r)})["catch"](r)},S._allDocs=function(e,t){"function"==typeof e&&(t=e,e={}),A("allDocs",[e],function(r,n){return r?t(r):(e.attachments&&e.binary&&n.rows.forEach(m),void t(null,n))})},S._changes=function(e){if(e=i.clone(e),e.continuous){var r=a();return S._changesListeners[r]={listener:e.onChange,asBinary:e.attachments&&e.binary},S._callbacks[r]=e.complete,S._socket.send("liveChanges:"+r+":"+JSON.stringify([e])),{cancel:function(){S._socket.send("cancelChanges:"+r+":"+JSON.stringify([]))}}}A("changes",[e],function(r,n){return r?(e.complete(r),t(r)):(n.results.forEach(function(t){e.attachments&&e.binary&&m(t),e.onChange(t)}),(e.returnDocs===!1||e.return_docs===!1)&&(n.results=[]),void e.complete(null,n))})},S.revsDiff=b("revsDiff",function(e,t,r){"function"==typeof t&&(r=t,t={}),A("revsDiff",[e,t],r)}),S._query=b("query",function(e,t,r){"function"==typeof t&&(r=t,t={});var n=e;"function"==typeof e&&(n={map:e}),A("query",[n,t],function(e,n){return e?r(e):(t.attachments&&t.binary&&n.rows.forEach(m),void r(null,n))})}),S._viewCleanup=b("viewCleanup",function(e){A("viewCleanup",[],e)}),S._close=function(e){var t="$"+S._socketName;return _[t]?(delete _[t],void n(S,e)):e()},S.destroy=b("destroy",function(e,t){"function"==typeof e&&(t=e,e={});var r="$"+S._socketName;return _[r]?(delete _[r],void A("destroy",[],function(e,r){return e?(S.emit("error",e),t(e)):void n(S,function(e){return e?(S.emit("error",e),t(e)):(S.emit("destroyed"),S.constructor.emit("destroyed",S._name),void t(null,r))})})):t(null,{ok:!0})})}var i=e("../shared/utils"),s=e("./utils"),a=e("./../shared/uuid"),c=e("../shared/errors"),u=e("debug")("pouchdb:socket:client"),f=e("engine.io-client"),l=e("blob-util"),p="undefined"==typeof r||r.browser,h=e("../shared/buffer"),d=s.preprocessAttachments,y=s.stringifyArgs,g=s.padInt,m=s.readAttachmentsAsBlobOrBuffer,b=s.adapterFun,v=e("./readAsBinaryString"),w=e("../shared/isBinaryObject"),B=e("pouchdb/extras/promise"),k=e("./base64"),_={};o.valid=function(){return!0},t.exports=o,"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.adapter("socket",t.exports)}).call(this,e("_process"))},{"../shared/buffer":11,"../shared/errors":13,"../shared/isBinaryObject":14,"../shared/utils":17,"./../shared/uuid":18,"./base64":3,"./readAsBinaryString":9,"./utils":10,_process:77,"blob-util":22,debug:27,"engine.io-client":29,"pouchdb/extras/promise":73}],9:[function(e,t,r){"use strict";var n=e("./arrayBufferToBinaryString");t.exports=function(e,t){var r=new FileReader,o="function"==typeof r.readAsBinaryString;r.onloadend=function(e){var r=e.target.result||"";return o?t(r):void t(n(r))},o?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}},{"./arrayBufferToBinaryString":2}],10:[function(e,t,r){(function(t){"use strict";var n=e("../shared/utils"),o=e("debug")("pouchdb:socket:client"),i="undefined"==typeof t||t.browser;r.preprocessAttachments=function(e){if(!e._attachments||!Object.keys(e._attachments))return n.Promise.resolve();var t=e._attachments;return n.Promise.all(Object.keys(t).map(function(e){var r=t[e];if(r.data&&"string"!=typeof r.data){if(i)return new n.Promise(function(e){n.readAsBinaryString(r.data,function(t){r.data=n.btoa(t),e()})});r.data=r.data.toString("base64")}}))};var s=e("./base64StringToBlobOrBuffer");r.readAttachmentsAsBlobOrBuffer=function(e){var t=e.doc&&e.doc._attachments||e.ok&&e.ok._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];r.data=s(r.data,r.content_type)})},r.stringifyArgs=function(e){var t=["filter","map","reduce"];return e.forEach(function(e){"object"!=typeof e||null===e||Array.isArray(e)||t.forEach(function(t){t in e&&"function"==typeof e[t]&&(e[t]={type:"func",func:e[t].toString()})})}),JSON.stringify(e)},r.padInt=function(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r},r.adapterFun=function(e,t){function r(e,t,r){if(o.enabled){for(var n=[e._db_name,t],i=0;i<r.length-1;i++)n.push(r[i]);o.apply(null,n);var s=r[r.length-1];r[r.length-1]=function(r,n){var i=[e._db_name,t];i=i.concat(r?["error",r]:["success",n]),o.apply(null,i),s(r,n)}}}return n.toPromise(n.getArguments(function(o){if(this._closed)return n.Promise.reject(new Error("database is closed"));var i=this;return r(i,e,o),this.taskqueue.isReady?t.apply(this,o):new n.Promise(function(t,r){i.taskqueue.addTask(function(n){n?r(n):t(i[e].apply(i,o))})})}))}}).call(this,e("_process"))},{"../shared/utils":17,"./base64StringToBlobOrBuffer":4,_process:77,debug:27}],11:[function(e,t,r){t.exports={}},{}],12:[function(e,t,r){"use strict";function n(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}t.exports=function(e){if(e instanceof ArrayBuffer)return n(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}},{}],13:[function(e,t,r){"use strict";function n(e){Error.call(e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}var o=e("inherits");o(n,Error),n.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},r.UNAUTHORIZED=new n({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),r.MISSING_BULK_DOCS=new n({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),r.MISSING_DOC=new n({status:404,error:"not_found",reason:"missing"}),r.REV_CONFLICT=new n({status:409,error:"conflict",reason:"Document update conflict"}),r.INVALID_ID=new n({status:400,error:"invalid_id",reason:"_id field must contain a string"}),r.MISSING_ID=new n({status:412,error:"missing_id",reason:"_id is required for puts"}),r.RESERVED_ID=new n({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),r.NOT_OPEN=new n({status:412,error:"precondition_failed",reason:"Database not open"}),r.UNKNOWN_ERROR=new n({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),r.BAD_ARG=new n({status:500,error:"badarg",reason:"Some query argument is invalid"}),r.INVALID_REQUEST=new n({status:400,error:"invalid_request",reason:"Request was invalid"}),r.QUERY_PARSE_ERROR=new n({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),r.DOC_VALIDATION=new n({status:500,error:"doc_validation",reason:"Bad special document member"}),r.BAD_REQUEST=new n({status:400,error:"bad_request",reason:"Something wrong with the request"}),r.NOT_AN_OBJECT=new n({status:400,error:"bad_request",reason:"Document must be a JSON object"}),r.DB_MISSING=new n({status:404,error:"not_found",reason:"Database not found"}),r.IDB_ERROR=new n({status:500,error:"indexed_db_went_bad",reason:"unknown"}),r.WSQ_ERROR=new n({status:500,error:"web_sql_went_bad",reason:"unknown"}),r.LDB_ERROR=new n({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),r.FORBIDDEN=new n({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),r.INVALID_REV=new n({status:400,error:"bad_request",reason:"Invalid rev format"}),r.FILE_EXISTS=new n({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),r.MISSING_STUB=new n({status:412,error:"missing_stub"}),r.error=function(e,t,r){function o(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==r&&(this.name=r),void 0!==t&&(this.reason=t)}return o.prototype=n.prototype,new o(t)},r.getErrorTypeByProp=function(e,t,n){var o=r,i=Object.keys(o).filter(function(r){var n=o[r];return"function"!=typeof n&&n[e]===t}),s=n&&i.filter(function(e){var t=o[e];return t.message===n})[0]||i[0];return s?o[s]:null},r.generateErrorFromResponse=function(e){var t,n,o,i,s,a=r;return n=e.error===!0&&"string"==typeof e.name?e.name:e.error,s=e.reason,o=a.getErrorTypeByProp("name",n,s),e.missing||"missing"===s||"deleted"===s||"not_found"===n?o=a.MISSING_DOC:"doc_validation"===n?(o=a.DOC_VALIDATION,i=s):"bad_request"===n&&o.message!==s&&(0===s.indexOf("unknown stub attachment")?(o=a.MISSING_STUB,i=s):o=a.BAD_REQUEST),o||(o=a.getErrorTypeByProp("status",e.status,s)||a.UNKNOWN_ERROR),t=a.error(o,s,n),i&&(t.message=i),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.statusText&&(t.name=e.statusText),e.missing&&(t.missing=e.missing),t}},{inherits:53}],14:[function(e,t,r){"use strict";t.exports=function(e){return e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}},{}],15:[function(e,t,r){"use strict";function n(e,t){for(var r=[],n=0;t-1>n;n++){var o=e.indexOf(":");r.push(e.substring(0,o)),e=e.substring(o+1)}return r.push(e),r}t.exports=n},{}],16:[function(e,t,r){"use strict";var n=e("./isBinaryObject"),o=e("./cloneBinaryObject");t.exports=function i(e){var t,r,s;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,s=e.length;s>r;r++)t[r]=i(e[r]);return t}if(e instanceof Date)return e.toISOString();if(n(e))return o(e);t={};for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=i(e[r]);"undefined"!=typeof a&&(t[r]=a)}return t}},{"./cloneBinaryObject":12,"./isBinaryObject":14}],17:[function(e,t,r){(function(t){"use strict";var n=e("pouchdb/extras/promise"),o=e("./buffer");r.lastIndexOf=function(e,t){for(var r=e.length-1;r>=0;r--)if(e.charAt(r)===t)return r;return-1},r.clone=e("./pouchdb-clone"),r.parseMessage=e("./parse-message"),r.once=function(e){var t=!1;return r.getArguments(function(r){if(t)throw console.trace(),new Error("once called  more than once");t=!0,e.apply(this,r)})},r.getArguments=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}},r.toPromise=function(e){return r.getArguments(function(o){var i,s=this,a="function"==typeof o[o.length-1]?o.pop():!1;a&&(i=function(e,r){t.nextTick(function(){a(e,r)})});var c=new n(function(t,n){try{var i=r.once(function(e,r){e?n(e):t(r)});o.push(i),e.apply(s,o)}catch(a){n(a)}});return i&&c.then(function(e){i(null,e)},i),c.cancel=function(){return this},c})},"function"==typeof atob?r.atob=function(e){return atob(e)}:r.atob=function(e){var t=new o(e,"base64");if(t.toString("base64")!==e)throw"Cannot base64 encode full string";return t.toString("binary")},"function"==typeof btoa?r.btoa=function(e){return btoa(e)}:r.btoa=function(e){return new o(e,"binary").toString("base64")},r.inherits=e("inherits"),r.Promise=n;var i=e("pouchdb-binary-util");r.createBlob=i.createBlob,r.readAsArrayBuffer=i.readAsArrayBuffer,r.readAsBinaryString=i.readAsBinaryString,r.binaryStringToArrayBuffer=i.binaryStringToArrayBuffer,r.arrayBufferToBinaryString=i.arrayBufferToBinaryString}).call(this,e("_process"))},{"./buffer":11,"./parse-message":15,"./pouchdb-clone":16,_process:77,inherits:53,"pouchdb-binary-util":59,"pouchdb/extras/promise":73}],18:[function(e,t,r){"use strict";function n(e){return 0|Math.random()*e}function o(e,t){t=t||i.length;var r="",o=-1;if(e){for(;++o<e;)r+=i[n(t)];return r}for(;++o<36;)switch(o){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=i[3&n(16)|8];break;default:r+=i[n(16)]}return r}var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.exports=o},{}],19:[function(e,t,r){function n(e,t,r){function n(e,o){if(n.count<=0)throw new Error("after called too many times");--n.count,e?(i=!0,t(e),t=r):0!==n.count||i||t(null,o)}var i=!1;return r=r||o,n.count=e,0===e?t():n}function o(){}t.exports=n},{}],20:[function(e,t,r){t.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(0>t&&(t+=n),0>r&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(r-t),s=t,a=0;r>s;s++,a++)i[a]=o[s];return i.buffer}},{}],21:[function(e,t,r){!function(e){"use strict";r.encode=function(t){var r,n=new Uint8Array(t),o=n.length,i="";for(r=0;o>r;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},r.decode=function(t){var r,n,o,i,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var f=new ArrayBuffer(a),l=new Uint8Array(f);for(r=0;c>r;r+=4)n=e.indexOf(t[r]),o=e.indexOf(t[r+1]),i=e.indexOf(t[r+2]),s=e.indexOf(t[r+3]),l[u++]=n<<2|o>>4,l[u++]=(15&o)<<4|i>>2,l[u++]=(3&i)<<6|63&s;return f}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],22:[function(e,t,r){"use strict";function n(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=-1;++o<t;)n[o]=e.charCodeAt(o);return r}function o(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=-1;++o<n;)t+=String.fromCharCode(r[o]);return t}function i(e,t){return new B(function(r,n){var o=new Image;t&&(o.crossOrigin=t),o.onload=function(){r(o)},o.onerror=n,o.src=e})}function s(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return r.drawImage(e,0,0,e.width,e.height,0,0,e.width,e.height),t}function a(e,t){return t=t||{},"string"==typeof t&&(t={type:t}),new w(e,t)}function c(e){return(window.URL||window.webkitURL).createObjectURL(e)}function u(e){return(window.URL||window.webkitURL).revokeObjectURL(e)}function f(e){return new B(function(t,r){var n=new FileReader,i="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var r=e.target.result||"";return i?t(r):void t(o(r))},n.onerror=r,i?n.readAsBinaryString(e):n.readAsArrayBuffer(e)})}function l(e,t){return B.resolve().then(function(){var r=[n(atob(e))];return t?a(r,{type:t}):a(r)})}function p(e,t){return B.resolve().then(function(){return l(btoa(e),t)})}function h(e){return f(e).then(function(e){return btoa(e)})}function d(e){return B.resolve().then(function(){var t=e.match(/data:([^;]+)/)[1],r=e.replace(/^[^,]+,/,""),o=n(atob(r));return a([o],{type:t})})}function y(e,t,r){return t=t||"image/png",i(e,r).then(function(e){return s(e)}).then(function(e){return e.toDataURL(t)})}function g(e,t){return B.resolve().then(function(){return"function"==typeof e.toBlob?new B(function(r){e.toBlob(r,t)}):d(e.toDataURL(t))})}function m(e,t,r){return t=t||"image/png",i(e,r).then(function(e){return s(e)}).then(function(e){return g(e,t)})}function b(e,t){return B.resolve().then(function(){return a([e],t)})}function v(e){return new B(function(t,r){var n=new FileReader;n.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);t(r)},n.onerror=r,n.readAsArrayBuffer(e)})}var w=e("blob"),B=e("pouchdb-promise");t.exports={createBlob:a,createObjectURL:c,revokeObjectURL:u,imgSrcToBlob:m,imgSrcToDataURL:y,canvasToBlob:g,dataURLToBlob:d,blobToBase64String:h,base64StringToBlob:l,binaryStringToBlob:p,blobToBinaryString:f,arrayBufferToBlob:b,blobToArrayBuffer:v}},{blob:23,"pouchdb-promise":60}],23:[function(e,t,r){(function(e){function r(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}e[t]=n}}}function n(e,t){t=t||{};var n=new i;r(e);for(var o=0;o<e.length;o++)n.append(e[o]);return t.type?n.getBlob(t.type):n.getBlob()}function o(e,t){return r(e),new Blob(e,t||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),a=s&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?n:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,r){},{}],25:[function(e,t,r){function n(e){return e?o(e):void 0}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],26:[function(e,t,r){t.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],27:[function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(t){}}function a(){var e;try{e=r.storage.debug}catch(t){}return e}function c(){try{return window.localStorage}catch(e){}}r=t.exports=e("./debug"),r.log=i,r.formatArgs=o,r.save=s,r.load=a,r.useColors=n,r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(a())},{"./debug":28}],28:[function(e,t,r){function n(){return r.colors[f++%r.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,i=t-(u||t);e.diff=i,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=n());var s=Array.prototype.slice.call(arguments);s[0]=r.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,n){if("%%"===t)return t;a++;var o=r.formatters[n];if("function"==typeof o){var i=s[a];t=o.call(e,i),s.splice(a,1),a--}return t}),"function"==typeof r.formatArgs&&(s=r.formatArgs.apply(e,s));var c=o.log||r.log||console.log.bind(console);c.apply(e,s)}t.enabled=!1,o.enabled=!0;var i=r.enabled(e)?o:t;return i.namespace=e,i}function i(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,o=0;n>o;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function s(){r.enable("")}function a(e){var t,n;for(t=0,n=r.skips.length;n>t;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;n>t;t++)if(r.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=o,r.coerce=c,r.disable=s,r.enable=i,r.enabled=a,r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var u,f=0},{ms:55}],29:[function(e,t,r){t.exports=e("./lib/")},{"./lib/":30}],30:[function(e,t,r){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":31,"engine.io-parser":42}],31:[function(e,t,r){(function(r){function n(e,t){if(!(this instanceof n))return new n(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=f(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:r.location&&"https:"==location.protocol,t.host){var o=t.host.split(":");t.hostname=o.shift(),o.length?t.port=o.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function o(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var i=e("./transports"),s=e("component-emitter"),a=e("debug")("engine.io-client:socket"),c=e("indexof"),u=e("engine.io-parser"),f=e("parseuri"),l=e("parsejson"),p=e("parseqs");t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=u.protocol,n.Socket=n,n.Transport=e("./transport"),n.transports=e("./transports"),n.parser=e("engine.io-parser"),n.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=o(this.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return r},n.prototype.open=function(){var e;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(p.onlyBinaryUpgrades){var t=!this.supportsBinary&&p.transport.supportsBinary;l=l||t}l||(a('probe transport "%s" opened',e),f.send([{type:"ping",data:"probe"}]),f.once("packet",function(t){if(!l)if("pong"==t.type&&"probe"==t.data){if(a('probe transport "%s" pong',e),p.upgrading=!0,p.emit("upgrading",f),!f)return;n.priorWebsocketSuccess="websocket"==f.name,a('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){l||"closed"!=p.readyState&&(a("changing transport and sending upgrade packet"),u(),p.setTransport(f),f.send([{type:"upgrade"}]),p.emit("upgrade",f),f=null,p.upgrading=!1,p.flush())})}else{a('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=f.name,p.emit("upgradeError",r)}}))}function r(){l||(l=!0,u(),f.close(),f=null)}function o(t){var n=new Error("probe error: "+t);n.transport=f.name,r(),a('probe transport "%s" failed because of error: %s',e,t),p.emit("upgradeError",n)}function i(){o("transport closed")}function s(){o("socket closed")}function c(e){f&&e.name!=f.name&&(a('"%s" works - aborting "%s"',e.name,f.name),r())}function u(){f.removeListener("open",t),f.removeListener("error",o),f.removeListener("close",i),p.removeListener("close",s),p.removeListener("upgrading",c);
}a('probing transport "%s"',e);var f=this.createTransport(e,{probe:1}),l=!1,p=this;n.priorWebsocketSuccess=!1,f.once("open",t),f.once("error",o),f.once("close",i),this.once("close",s),this.once("upgrading",c),f.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(l(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){this.sendPacket("ping")},n.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},n.prototype.sendPacket=function(e,t,r){if("closing"!=this.readyState&&"closed"!=this.readyState){var n={type:e,data:t};this.emit("packetCreate",n),this.writeBuffer.push(n),this.callbackBuffer.push(r),this.flush()}},n.prototype.close=function(){function e(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function r(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},n.prototype.onError=function(e){a("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},n.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;n>r;r++)~c(this.transports,e[r])&&t.push(e[r]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":32,"./transports":33,"component-emitter":25,debug:39,"engine.io-parser":42,indexof:52,parsejson:56,parseqs:57,parseuri:58}],32:[function(e,t,r){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}var o=e("engine.io-parser"),i=e("component-emitter");t.exports=n,i(n.prototype),n.timestamps=0,n.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},n.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":25,"engine.io-parser":42}],33:[function(e,t,r){(function(t){function n(e){var r,n=!1,a=!1,c=!1!==e.jsonp;if(t.location){var u="https:"==location.protocol,f=location.port;f||(f=u?443:80),n=e.hostname!=location.hostname||f!=e.port,a=e.secure!=u}if(e.xdomain=n,e.xscheme=a,r=new o(e),"open"in r&&!e.forceJSONP)return new i(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var o=e("xmlhttprequest"),i=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");r.polling=n,r.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":34,"./polling-xhr":35,"./websocket":37,xmlhttprequest:38}],34:[function(e,t,r){(function(r){function n(){}function o(e){i.call(this,e),this.query=this.query||{},a||(r.___eio||(r.___eio=[]),a=r.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=n)},!1)}var i=e("./polling"),s=e("component-inherit");t.exports=o;var a,c=/\n/g,u=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function r(){n(),t()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),f=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=f,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":36,"component-inherit":26}],35:[function(e,t,r){(function(r){function n(){}function o(e){if(c.call(this,e),r.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=r.location.hostname||n!=e.port,this.xs=e.secure!=t}}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function s(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var a=e("xmlhttprequest"),c=e("./polling"),u=e("component-emitter"),f=e("component-inherit"),l=e("debug")("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,f(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new i(e)},o.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=n},o.prototype.doPoll=function(){l("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new a(e),n=this;try{if(l("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},l("xhr data %s",this.data),t.send(this.data)}catch(o){return void setTimeout(function(){n.onError(o)},0)}r.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(t){}r.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(r){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(r){this.onError(r)}null!=e&&this.onData(e)},i.prototype.hasXDR=function(){return"undefined"!=typeof r.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},r.document&&(i.requestsCount=0,i.requests={},r.attachEvent?r.attachEvent("onunload",s):r.addEventListener&&r.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":36,"component-emitter":25,"component-inherit":26,debug:39,xmlhttprequest:38}],36:[function(e,t,r){function n(e){var t=e&&e.forceBase64;(!u||t)&&(this.supportsBinary=!1),o.call(this,e)}var o=e("../transport"),i=e("parseqs"),s=e("engine.io-parser"),a=e("component-inherit"),c=e("debug")("engine.io-client:polling");t.exports=n;var u=function(){var t=e("xmlhttprequest"),r=new t({xdomain:!1});return null!=r.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){c("paused"),r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(c("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){c("pre-pause polling complete"),--n||t()})),this.writable||(c("we are currently writing - waiting to pause"),n++,this.once("drain",function(){c("pre-pause writing complete"),--n||t()}))}else t()},n.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;c("polling got data %s",e);var r=function(e,r,n){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")},t=this;s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,r)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+o.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e}},{"../transport":32,"component-inherit":26,debug:39,"engine.io-parser":42,parseqs:57,xmlhttprequest:38}],37:[function(e,t,r){function n(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),o.call(this,e)}var o=e("../transport"),i=e("engine.io-parser"),s=e("parseqs"),a=e("component-inherit"),c=e("debug")("engine.io-client:websocket"),u=e("ws");t.exports=n,a(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,r={agent:this.agent};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.ws=new u(e,t,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(e){var t=this;setTimeout(function(){o.prototype.onData.call(t,e)},0)}),n.prototype.write=function(e){function t(){r.writable=!0,r.emit("drain")}var r=this;this.writable=!1;for(var n=0,o=e.length;o>n;n++)i.encodePacket(e[n],this.supportsBinary,function(e){try{r.ws.send(e)}catch(t){c("websocket closed before onclose event")}});setTimeout(t,0)},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=s.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+r+this.path+e},n.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===n.prototype.name)}},{"../transport":32,"component-inherit":26,debug:39,"engine.io-parser":42,parseqs:57,ws:79}],38:[function(e,t,r){var n=e("has-cors");t.exports=function(e){var t=e.xdomain,r=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(i){}try{if("undefined"!=typeof XDomainRequest&&!r&&o)return new XDomainRequest}catch(i){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}},{"has-cors":46}],39:[function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n),e}function i(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}}function a(){var e;try{e=localStorage.debug}catch(t){}return e}r=t.exports=e("./debug"),r.log=i,r.formatArgs=o,r.save=s,r.load=a,r.useColors=n,r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(a())},{"./debug":40}],40:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{dup:28,ms:41}],41:[function(e,t,r){function n(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return r*l;case"days":case"day":case"d":return r*f;case"hours":case"hour":case"h":return r*u;case"minutes":case"minute":case"m":return r*c;case"seconds":case"second":case"s":return r*a;case"ms":return r}}}function o(e){return e>=f?Math.round(e/f)+"d":e>=u?Math.round(e/u)+"h":e>=c?Math.round(e/c)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function i(e){return s(e,f,"day")||s(e,u,"hour")||s(e,c,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var a=1e3,c=60*a,u=60*c,f=24*u,l=365.25*f;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?i(e):o(e)}},{}],42:[function(e,t,r){(function(t){function n(e,t){var n="b"+r.packets[e.type]+e.data.data;return t(n)}function o(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=m[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(e,t,n){if(!t)return r.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){e.data=o.result,r.encodePacket(e,t,!0,n)},o.readAsArrayBuffer(e.data)}function s(e,t,n){if(!t)return r.encodeBase64Packet(e,n);if(g)return i(e,t,n);var o=new Uint8Array(1);o[0]=m[e.type];var s=new w([o.buffer,e.data]);return n(s)}function a(e,t,r){for(var n=new Array(e.length),o=p(e.length,r),i=function(e,r,o){t(r,function(t,r){n[e]=r,o(t,n)})},s=0;s<e.length;s++)i(s,e[s],o)}var c=e("./keys"),u=e("has-binary"),f=e("arraybuffer.slice"),l=e("base64-arraybuffer"),p=e("after"),h=e("utf8"),d=navigator.userAgent.match(/Android/i),y=/PhantomJS/i.test(navigator.userAgent),g=d||y;r.protocol=3;var m=r.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=c(m),v={type:"error",data:"parser error"},w=e("blob");r.encodePacket=function(e,r,i,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,r,a);if(w&&c instanceof t.Blob)return s(e,r,a);if(c&&c.base64)return n(e,a);var u=m[e.type];return void 0!==e.data&&(u+=i?h.encode(String(e.data)):String(e.data)),a(""+u)},r.encodeBase64Packet=function(e,n){var o="b"+r.packets[e.type];if(w&&e.data instanceof w){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];n(o+e)},i.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(a){for(var c=new Uint8Array(e.data),u=new Array(c.length),f=0;f<c.length;f++)u[f]=c[f];s=String.fromCharCode.apply(null,u)}return o+=t.btoa(s),n(o)},r.decodePacket=function(e,t,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return r.decodeBase64Packet(e.substr(1),t);if(n)try{e=h.decode(e)}catch(o){return v}var i=e.charAt(0);return Number(i)==i&&b[i]?e.length>1?{type:b[i],data:e.substring(1)}:{type:b[i]}:v}var s=new Uint8Array(e),i=s[0],a=f(e,1);return w&&"blob"===t&&(a=new w([a])),{type:b[i],data:a}},r.decodeBase64Packet=function(e,r){var n=b[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=l.decode(e.substr(1));return"blob"===r&&w&&(o=new w([o])),{type:n,data:o}},r.encodePayload=function(e,t,n){function o(e){return e.length+":"+e}function i(e,n){r.encodePacket(e,s?t:!1,!0,function(e){n(null,o(e))})}"function"==typeof t&&(n=t,t=null);var s=u(e);return t&&s?w&&!g?r.encodePayloadAsBlob(e,n):r.encodePayloadAsArrayBuffer(e,n):e.length?void a(e,i,function(e,t){return n(t.join(""))}):n("0:")},r.decodePayload=function(e,t,n){if("string"!=typeof e)return r.decodePayloadAsBinary(e,t,n);"function"==typeof t&&(n=t,t=null);var o;if(""==e)return n(v,0,1);for(var i,s,a="",c=0,u=e.length;u>c;c++){var f=e.charAt(c);if(":"!=f)a+=f;else{if(""==a||a!=(i=Number(a)))return n(v,0,1);if(s=e.substr(c+1,i),a!=s.length)return n(v,0,1);if(s.length){if(o=r.decodePacket(s,t,!0),v.type==o.type&&v.data==o.data)return n(v,0,1);var l=n(o,c+i,u);if(!1===l)return}c+=i,a=""}}return""!=a?n(v,0,1):void 0},r.encodePayloadAsArrayBuffer=function(e,t){function n(e,t){r.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void a(e,n,function(e,r){var n=r.reduce(function(e,t){var r;return r="string"==typeof t?t.length:t.byteLength,e+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return r.forEach(function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);r=n.buffer}t?o[i++]=0:o[i++]=1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),t(o.buffer)}):t(new ArrayBuffer(0))},r.encodePayloadAsBlob=function(e,t){function n(e,t){r.encodePacket(e,!0,!0,function(e){var r=new Uint8Array(1);if(r[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,r[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,w){var c=new w([r.buffer,a.buffer,e]);t(null,c)}})}a(e,n,function(e,r){return t(new w(r))})},r.decodePayloadAsBinary=function(e,t,n){"function"==typeof t&&(n=t,t=null);for(var o=e,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",l=1;255!=a[l];l++){if(u.length>310){s=!0;break}u+=a[l]}if(s)return n(v,0,1);o=f(o,2+u.length),u=parseInt(u);var p=f(o,0,u);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(h){var d=new Uint8Array(p);p="";for(var l=0;l<d.length;l++)p+=String.fromCharCode(d[l])}i.push(p),o=f(o,u)}var y=i.length;i.forEach(function(e,o){n(r.decodePacket(e,t,!0),o,y)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":43,after:19,"arraybuffer.slice":20,"base64-arraybuffer":21,blob:23,"has-binary":45,utf8:78}],43:[function(e,t,r){t.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},{}],44:[function(e,t,r){t.exports=function(){return this}()},{}],45:[function(e,t,r){(function(r){function n(e){function t(e){if(!e)return!1;if(r.Buffer&&r.Buffer.isBuffer(e)||r.ArrayBuffer&&e instanceof ArrayBuffer||r.Blob&&e instanceof Blob||r.File&&e instanceof File)return!0;if(o(e)){for(var n=0;n<e.length;n++)if(t(e[n]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0}return!1}return t(e)}var o=e("isarray");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:54}],46:[function(e,t,r){var n=e("global");try{t.exports="XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}catch(o){t.exports=!1}},{global:44}],47:[function(e,t,r){"use strict";function n(){a=!1,c&&c.length?p=c.concat(p):l=-1,p.length&&o()}function o(){h=!1,a=!0;for(var e=p.length,t=setTimeout(n);e;){for(c=p,p=[];++l<e;)c[l].run();l=-1,e=p.length}l=-1,a=!1,clearTimeout(t)}function i(e,t){this.fun=e,this.array=t}function s(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new i(e,t)),h||a||(h=!0,u())}for(var a,c,u,f=[e("./nextTick"),e("./mutation.js"),e("./messageChannel"),e("./stateChange"),e("./timeout")],l=-1,p=[],h=!1,d=-1,y=f.length;++d<y;)if(f[d]&&f[d].test&&f[d].test()){u=f[d].install(o);break}i.prototype.run=function(){this.fun.apply(null,this.array)},t.exports=s},{"./messageChannel":48,"./mutation.js":49,"./nextTick":24,"./stateChange":50,"./timeout":51}],48:[function(e,t,r){(function(e){"use strict";r.test=function(){return e.setImmediate?!1:"undefined"!=typeof e.MessageChannel},r.install=function(t){var r=new e.MessageChannel;return r.port1.onmessage=t,function(){r.port2.postMessage(0)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,r){(function(e){"use strict";var t=e.MutationObserver||e.WebKitMutationObserver;r.test=function(){return t},r.install=function(r){var n=0,o=new t(r),i=e.document.createTextNode("");return o.observe(i,{characterData:!0}),function(){i.data=n=++n%2}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],50:[function(e,t,r){(function(e){"use strict";r.test=function(){return"document"in e&&"onreadystatechange"in e.document.createElement("script")},r.install=function(t){return function(){var r=e.document.createElement("script");return r.onreadystatechange=function(){t(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},e.document.documentElement.appendChild(r),t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,t,r){"use strict";r.test=function(){return!0},r.install=function(e){return function(){setTimeout(e,0)}}},{}],52:[function(e,t,r){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},{}],53:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],54:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],55:[function(e,t,r){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*f;case"hours":case"hour":case"hrs":case"hr":case"h":return r*u;case"minutes":case"minute":case"mins":case"min":case"m":return r*c;case"seconds":case"second":case"secs":case"sec":case"s":return r*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function o(e){return e>=f?Math.round(e/f)+"d":e>=u?Math.round(e/u)+"h":e>=c?Math.round(e/c)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function i(e){return s(e,f,"day")||s(e,u,"hour")||s(e,c,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var a=1e3,c=60*a,u=60*c,f=24*u,l=365.25*f;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?i(e):o(e)}},{}],56:[function(e,t,r){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(e,t,r){r.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},r.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;o>n;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},{}],58:[function(e,t,r){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,r=e.indexOf("["),i=e.indexOf("]");-1!=r&&-1!=i&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=n.exec(e||""),a={},c=14;c--;)a[o[c]]=s[c]||"";return-1!=r&&-1!=i&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],59:[function(e,t,r){(function(e){"use strict";function r(t,r){t=t||[],r=r||{};try{return new Blob(t,r)}catch(n){if("TypeError"!==n.name)throw n;for(var o=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,i=new o,s=0;s<t.length;s+=1)i.append(t[s]);return i.getBlob(r.type)}}function n(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;n>o;o++)t+=String.fromCharCode(r[o]);return t}function o(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;t>o;o++)n[o]=e.charCodeAt(o);return r}function i(e,t){var r=new FileReader,o="function"==typeof r.readAsBinaryString;r.onloadend=function(e){var r=e.target.result||"";return o?t(r):void t(n(r))},o?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}function s(e,t){var r=new FileReader;r.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);
t(r)},r.readAsArrayBuffer(e)}t.exports={createBlob:r,readAsArrayBuffer:s,readAsBinaryString:i,binaryStringToArrayBuffer:o,arrayBufferToBinaryString:n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(e,t,r){(function(r){"function"==typeof r.Promise?t.exports=r.Promise:t.exports=e("bluebird")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bluebird:64}],61:[function(e,t,r){"use strict";function n(){}t.exports=n},{}],62:[function(e,t,r){"use strict";var n=e("./promise"),o=e("./reject"),i=e("./resolve"),s=e("./INTERNAL"),a=e("./handlers"),c=o(new TypeError("must be an array"));t.exports=function(e){function t(e,t){function n(e){u[t]=e,++f===r&!o&&(o=!0,a.resolve(p,u))}i(e).then(n,function(e){o||(o=!0,a.reject(p,e))})}if("[object Array]"!==Object.prototype.toString.call(e))return c;var r=e.length,o=!1;if(!r)return i([]);for(var u=new Array(r),f=0,l=-1,p=new n(s);++l<r;)t(e[l],l);return p}},{"./INTERNAL":61,"./handlers":63,"./promise":65,"./reject":67,"./resolve":68}],63:[function(e,t,r){"use strict";function n(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}var o=e("./tryCatch"),i=e("./resolveThenable"),s=e("./states");r.resolve=function(e,t){var a=o(n,t);if("error"===a.status)return r.reject(e,a.value);var c=a.value;if(c)i.safely(e,c);else{e.state=s.FULFILLED,e.outcome=t;for(var u=-1,f=e.queue.length;++u<f;)e.queue[u].callFulfilled(t)}return e},r.reject=function(e,t){e.state=s.REJECTED,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e}},{"./resolveThenable":69,"./states":70,"./tryCatch":71}],64:[function(e,t,r){t.exports=r=e("./promise"),r.resolve=e("./resolve"),r.reject=e("./reject"),r.all=e("./all")},{"./all":62,"./promise":65,"./reject":67,"./resolve":68}],65:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);if("function"!=typeof e)throw new TypeError("reslover must be a function");this.state=a.PENDING,this.queue=[],this.outcome=void 0,e!==i&&s.safely(this,e)}var o=e("./unwrap"),i=e("./INTERNAL"),s=e("./resolveThenable"),a=e("./states"),c=e("./queueItem");t.exports=n,n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a.FULFILLED||"function"!=typeof t&&this.state===a.REJECTED)return this;var r=new n(i);if(this.state!==a.PENDING){var s=this.state===a.FULFILLED?e:t;o(r,s,this.outcome)}else this.queue.push(new c(r,e,t));return r}},{"./INTERNAL":61,"./queueItem":66,"./resolveThenable":69,"./states":70,"./unwrap":72}],66:[function(e,t,r){"use strict";function n(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}var o=e("./handlers"),i=e("./unwrap");t.exports=n,n.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},n.prototype.otherCallFulfilled=function(e){i(this.promise,this.onFulfilled,e)},n.prototype.callRejected=function(e){o.reject(this.promise,e)},n.prototype.otherCallRejected=function(e){i(this.promise,this.onRejected,e)}},{"./handlers":63,"./unwrap":72}],67:[function(e,t,r){"use strict";function n(e){var t=new o(i);return s.reject(t,e)}var o=e("./promise"),i=e("./INTERNAL"),s=e("./handlers");t.exports=n},{"./INTERNAL":61,"./handlers":63,"./promise":65}],68:[function(e,t,r){"use strict";function n(e){if(e)return e instanceof o?e:s.resolve(new o(i),e);var t=typeof e;switch(t){case"boolean":return a;case"undefined":return u;case"object":return c;case"number":return f;case"string":return l}}var o=e("./promise"),i=e("./INTERNAL"),s=e("./handlers");t.exports=n;var a=s.resolve(new o(i),!1),c=s.resolve(new o(i),null),u=s.resolve(new o(i),void 0),f=s.resolve(new o(i),0),l=s.resolve(new o(i),"")},{"./INTERNAL":61,"./handlers":63,"./promise":65}],69:[function(e,t,r){"use strict";function n(e,t){function r(t){a||(a=!0,o.reject(e,t))}function n(t){a||(a=!0,o.resolve(e,t))}function s(){t(n,r)}var a=!1,c=i(s);"error"===c.status&&r(c.value)}var o=e("./handlers"),i=e("./tryCatch");r.safely=n},{"./handlers":63,"./tryCatch":71}],70:[function(e,t,r){r.REJECTED=["REJECTED"],r.FULFILLED=["FULFILLED"],r.PENDING=["PENDING"]},{}],71:[function(e,t,r){"use strict";function n(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}t.exports=n},{}],72:[function(e,t,r){"use strict";function n(e,t,r){o(function(){var n;try{n=t(r)}catch(o){return i.reject(e,o)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)})}var o=e("immediate"),i=e("./handlers");t.exports=n},{"./handlers":63,immediate:47}],73:[function(e,t,r){"use strict";t.exports=e("../lib/deps/promise")},{"../lib/deps/promise":74}],74:[function(e,t,r){"use strict";t.exports="function"==typeof Promise?Promise:e("lie")},{lie:76}],75:[function(e,t,r){(function(e){"use strict";function r(){f=!0;for(var e,t,r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}f=!1}function n(e){1!==l.push(e)||f||o()}var o,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,a=new i(r),c=e.document.createTextNode("");a.observe(c,{characterData:!0}),o=function(){c.data=s=++s%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var u=new e.MessageChannel;u.port1.onmessage=r,o=function(){u.port2.postMessage(0)}}var f,l=[];t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],76:[function(e,t,r){"use strict";function n(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,e!==n&&c(this,e)}function i(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function s(e,t,r){d(function(){var n;try{n=t(r)}catch(o){return y.reject(e,o)}n===e?y.reject(e,new TypeError("Cannot resolve promise with itself")):y.resolve(e,n)})}function a(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}function c(e,t){function r(t){i||(i=!0,y.reject(e,t))}function n(t){i||(i=!0,y.resolve(e,t))}function o(){t(n,r)}var i=!1,s=u(o);"error"===s.status&&r(s.value)}function u(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function f(e){return e instanceof this?e:y.resolve(new this(n),e)}function l(e){var t=new this(n);return y.reject(t,e)}function p(e){function t(e,t){function n(e){s[t]=e,++a!==o||i||(i=!0,y.resolve(u,s))}r.resolve(e).then(n,function(e){i||(i=!0,y.reject(u,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var s=new Array(o),a=0,c=-1,u=new this(n);++c<o;)t(e[c],c);return u}function h(e){function t(e){r.resolve(e).then(function(e){i||(i=!0,y.resolve(a,e))},function(e){i||(i=!0,y.reject(a,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var s=-1,a=new this(n);++s<o;)t(e[s]);return a}var d=e("immediate"),y={},g=["REJECTED"],m=["FULFILLED"],b=["PENDING"];t.exports=r=o,o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===m||"function"!=typeof t&&this.state===g)return this;var r=new this.constructor(n);if(this.state!==b){var o=this.state===m?e:t;s(r,o,this.outcome)}else this.queue.push(new i(r,e,t));return r},i.prototype.callFulfilled=function(e){y.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){y.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},y.resolve=function(e,t){var r=u(a,t);if("error"===r.status)return y.reject(e,r.value);var n=r.value;if(n)c(e,n);else{e.state=m,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},y.reject=function(e,t){e.state=g,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},r.resolve=f,r.reject=l,r.all=p,r.race=h},{immediate:75}],77:[function(e,t,r){function n(){if(!a){a=!0;for(var e,t=s.length;t;){e=s,s=[];for(var r=-1;++r<t;)e[r]();t=s.length}a=!1}}function o(){}var i=t.exports={},s=[],a=!1;i.nextTick=function(e){s.push(e),a||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],78:[function(t,r,n){(function(t){!function(o){function i(e){for(var t,r,n=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function s(e){for(var t,r=e.length,n=-1,o="";++n<r;)t=e[n],t>65535&&(t-=65536,o+=w(t>>>10&1023|55296),t=56320|1023&t),o+=w(t);return o}function a(e){if(e>=55296&&57343>=e)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function c(e,t){return w(e>>t&63|128)}function u(e){if(0==(4294967168&e))return w(e);var t="";return 0==(4294965248&e)?t=w(e>>6&31|192):0==(4294901760&e)?(a(e),t=w(e>>12&15|224),t+=c(e,6)):0==(4292870144&e)&&(t=w(e>>18&7|240),t+=c(e,12),t+=c(e,6)),t+=w(63&e|128)}function f(e){for(var t,r=i(e),n=r.length,o=-1,s="";++o<n;)t=r[o],s+=u(t);return s}function l(){if(v>=b)throw Error("Invalid byte index");var e=255&m[v];if(v++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(){var e,t,r,n,o;if(v>b)throw Error("Invalid byte index");if(v==b)return!1;if(e=255&m[v],v++,0==(128&e))return e;if(192==(224&e)){var t=l();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=l(),r=l(),o=(15&e)<<12|t<<6|r,o>=2048)return a(o),o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=l(),r=l(),n=l(),o=(15&e)<<18|t<<12|r<<6|n,o>=65536&&1114111>=o))return o;throw Error("Invalid UTF-8 detected")}function h(e){m=i(e),b=m.length,v=0;for(var t,r=[];(t=p())!==!1;)r.push(t);return s(r)}var d="object"==typeof n&&n,y="object"==typeof r&&r&&r.exports==d&&r,g="object"==typeof t&&t;(g.global===g||g.window===g)&&(o=g);var m,b,v,w=String.fromCharCode,B={version:"2.0.0",encode:f,decode:h};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return B});else if(d&&!d.nodeType)if(y)y.exports=B;else{var k={},_=k.hasOwnProperty;for(var A in B)_.call(B,A)&&(d[A]=B[A])}else o.utf8=B}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(e,t,r){function n(e,t,r){var n;return n=t?new i(e,t):new i(e)}var o=function(){return this}(),i=o.WebSocket||o.MozWebSocket;t.exports=i?n:null,i&&(n.prototype=i.prototype)},{}]},{},[1])(1)});
